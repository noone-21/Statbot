// Mentioned user
if (message.mentions.users.size > 0) {
  user = message.mentions.users.first();
  userId = user.id;
}
// User ID or username search
else if (args[0]) {
  // Check if input might be a user ID (all digits)
  const potentialId = args[0];
  if (/^\d+$/.test(potentialId)) {
    try {
      // Try to fetch user by ID
      user = await message.client.users.fetch(potentialId);
      userId = user.id;
    } catch (error) {
      // If user not found by ID, we'll try username search below
    }
  }
  
  // If user is still null, try username search
  if (!user) {
    const username = args.join(" ").toLowerCase();
    const guildUsers = await message.guild.members.fetch();
    const match = guildUsers.find(m =>
      m.user.username.toLowerCase() === username ||
      m.displayName.toLowerCase() === username
    );
    if (match) {
      user = match.user;
      userId = user.id;
    } else {
      return message.reply("❌ User not found by that username or ID.");
    }
  }
}
// No args = self
else {
  user = message.author;
  userId = user.id;
}
